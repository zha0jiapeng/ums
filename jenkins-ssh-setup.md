# Jenkins SSHè¿æ¥Giteeé…ç½®æŒ‡å—

## ğŸš€ å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

### æ­¥éª¤1ï¼šç”ŸæˆSSHå¯†é’¥
åœ¨JenkinsæœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š
```bash
# ç”ŸæˆSSHå¯†é’¥å¯¹
ssh-keygen -t rsa -b 4096 -C "jenkins@gitee.com"

# æŸ¥çœ‹å…¬é’¥å†…å®¹
cat ~/.ssh/id_rsa.pub
```

### æ­¥éª¤2ï¼šæ·»åŠ SSHå…¬é’¥åˆ°Gitee
1. ç™»å½•Giteeè´¦æˆ·
2. è¿›å…¥ è®¾ç½® â†’ SSHå…¬é’¥
3. ç‚¹å‡»"æ·»åŠ å…¬é’¥"
4. ç²˜è´´åˆšæ‰ç”Ÿæˆçš„å…¬é’¥å†…å®¹
5. ç‚¹å‡»"ç¡®å®š"

### æ­¥éª¤3ï¼šæµ‹è¯•SSHè¿æ¥
```bash
# æµ‹è¯•SSHè¿æ¥
ssh -T git@gitee.com
```

### æ­¥éª¤4ï¼šåœ¨Jenkinsä¸­é…ç½®SSHå‡­æ®
1. è¿›å…¥ Jenkins ç®¡ç† â†’ å‡­æ® â†’ ç³»ç»Ÿ â†’ å…¨å±€å‡­æ®
2. ç‚¹å‡»"æ·»åŠ å‡­æ®"
3. é€‰æ‹©ç±»å‹ï¼šSSH Username with private key
4. é…ç½®ï¼š
   - ID: gitee-ssh-key
   - æè¿°: Gitee SSH Key
   - ç”¨æˆ·å: git
   - ç§é’¥: é€‰æ‹©"From a file on jenkins master"
   - æ–‡ä»¶è·¯å¾„: ~/.ssh/id_rsa

### æ­¥éª¤5ï¼šä¿®æ”¹Jenkinsä»»åŠ¡é…ç½®
1. ç¼–è¾‘æ‚¨çš„Jenkinsä»»åŠ¡
2. åœ¨Pipelineé…ç½®ä¸­ï¼š
   - Repository URL: `git@gitee.com:zhao_jiapeng/ums-server-new.git`
   - Credentials: é€‰æ‹©åˆšæ‰åˆ›å»ºçš„SSHå‡­æ®

## ğŸ”§ è¯¦ç»†é…ç½®æ­¥éª¤

### 1. æ£€æŸ¥SSHå¯†é’¥æ˜¯å¦å­˜åœ¨
```bash
ls -la ~/.ssh/
```

### 2. å¦‚æœå¯†é’¥ä¸å­˜åœ¨ï¼Œç”Ÿæˆæ–°å¯†é’¥
```bash
ssh-keygen -t rsa -b 4096 -C "jenkins@gitee.com"
# æŒ‰å›è½¦æ¥å—é»˜è®¤è·¯å¾„
# å¯ä»¥è®¾ç½®å¯†ç ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å›è½¦ä¸è®¾ç½®å¯†ç 
```

### 3. å¯åŠ¨SSHä»£ç†å¹¶æ·»åŠ å¯†é’¥
```bash
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_rsa
```

### 4. å¤åˆ¶å…¬é’¥å†…å®¹
```bash
cat ~/.ssh/id_rsa.pub
```

### 5. åœ¨Giteeä¸­æ·»åŠ SSHå…¬é’¥
- ç™»å½•Gitee
- ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ è®¾ç½®
- å·¦ä¾§èœå•é€‰æ‹©"SSHå…¬é’¥"
- ç‚¹å‡»"æ·»åŠ å…¬é’¥"
- æ ‡é¢˜ï¼šJenkins Server
- å…¬é’¥ï¼šç²˜è´´åˆšæ‰å¤åˆ¶çš„å…¬é’¥å†…å®¹
- ç‚¹å‡»"ç¡®å®š"

### 6. æµ‹è¯•è¿æ¥
```bash
ssh -T git@gitee.com
# å¦‚æœæˆåŠŸï¼Œä¼šæ˜¾ç¤ºï¼šHi username! You've successfully authenticated...
```

## ğŸ“‹ éªŒè¯æ¸…å•

- [ ] SSHå¯†é’¥å·²ç”Ÿæˆ
- [ ] å…¬é’¥å·²æ·»åŠ åˆ°Gitee
- [ ] SSHè¿æ¥æµ‹è¯•æˆåŠŸ
- [ ] Jenkinsä¸­å·²é…ç½®SSHå‡­æ®
- [ ] Jenkinsä»»åŠ¡ä½¿ç”¨SSH URL

## ğŸ†˜ å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šSSHè¿æ¥è¢«æ‹’ç»
```bash
# æ£€æŸ¥SSHé…ç½®
ssh -vT git@gitee.com
```

### é—®é¢˜2ï¼šæƒé™è¢«æ‹’ç»
```bash
# æ£€æŸ¥å¯†é’¥æƒé™
chmod 600 ~/.ssh/id_rsa
chmod 644 ~/.ssh/id_rsa.pub
```

### é—®é¢˜3ï¼šJenkinsæ— æ³•æ‰¾åˆ°SSHå¯†é’¥
ç¡®ä¿Jenkinsç”¨æˆ·æœ‰æƒé™è®¿é—®SSHå¯†é’¥æ–‡ä»¶ï¼š
```bash
# å¦‚æœJenkinsè¿è¡Œåœ¨Dockerä¸­ï¼Œéœ€è¦æŒ‚è½½SSHç›®å½•
# æˆ–è€…å°†å¯†é’¥å¤åˆ¶åˆ°Jenkinså·¥ä½œç›®å½•
``` 